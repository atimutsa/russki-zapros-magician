<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/lovable-uploads/e9eff5ef-b525-4e04-a332-ea8106cec0bb.png" type="image/png">
    <title>TeamLex - голосовые и чат-боты для вашего бизнеса</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />

    <meta property="og:title" content="russki-zapros-magician" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js', 'ym');

        ym(53420689, 'init', {webvisor:true, clickmap:true, accurateTrackBounce:true, trackLinks:true});
    </script>
    <!-- /Yandex.Metrika counter -->
  </head>

  <body>
    <!-- Yandex.Metrika noscript -->
    <noscript><div><img src="https://mc.yandex.ru/watch/53420689" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika noscript -->
    <div id="root"></div>
    
    <!-- Chat Widget -->
    <div id="chat-client" style="z-index: 1000000;"></div>
    <script>
        const isLovablePreview = /(?:\.lovable\.app|lovableproject\.com)$/i.test(location.hostname);
        if (isLovablePreview) {
          console.info('Chat widget and container disabled in Lovable preview to prevent conflicts with Visual Edits.');
          // Hide chat container completely in Lovable environment
          document.getElementById('chat-client').style.display = 'none';
        } else {
          const host = document.getElementById('chat-client');
          const injectStyles = `
            [data-id=chat-host] {
              bottom: 8px;
              right: 8px;
              align-items: end;
            }
          `;

          function initChat() {
            try {
              if (typeof window.appChatClient === 'function') {
                window.appChatClient(
                  { chatId: 'af5e5ee3-5ad9-40f5-a44c-378d5d4b9429' },
                  { host, injectStyles }
                );
              }
            } catch (e) {
              console.warn('Chat widget init failed:', e);
            }
          }

          const s = document.createElement('script');
          s.src = 'https://twin24.ai/app/chat-client/widget.js';
          s.async = true;
          s.charset = 'utf-8';
          s.addEventListener('load', initChat, { once: true });
          s.addEventListener('error', () => console.warn('Chat widget failed to load'), { once: true });

          const loadScript = () => document.body.appendChild(s);
          if ('requestIdleCallback' in window) {
            // Defer loading to avoid blocking preview/app
            requestIdleCallback(loadScript, { timeout: 2000 });
          } else {
            setTimeout(loadScript, 0);
          }

          // Fallback in case onload doesn't fire
          setTimeout(initChat, 4000);
        }
    </script>
    
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
